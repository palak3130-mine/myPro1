{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Desktop/SupportHub1/frontend/app/page.tsx"],"sourcesContent":["\"use client\";\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nexport default function Home() {\n  const [companies, setCompanies] = useState([]);\n  const [formData, setFormData] = useState({\n    org_name: '', \n    submitter_name: '',\n    submission_source: 'Website',\n    issue_type: 'Hardware',\n    description: '',\n    contact_number: '', \n    email: ''          \n  });\n  \n  const [message, setMessage] = useState('');\n  // 1. NEW: State to store the Ticket Code\n  const [ticketCode, setTicketCode] = useState(null); \n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    axios.get('http://127.0.0.1:8000/api/clients/')\n      .then(response => {\n        setCompanies(response.data);\n        if (response.data.length > 0) {\n          setFormData(prev => ({ ...prev, org_name: response.data[0].id }));\n        }\n      })\n      .catch(error => console.error(\"Error fetching clients:\", error));\n  }, []);\n\n  const handleChange = (e) => {\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setMessage('');\n    setTicketCode(null); // Reset Code\n\n    try {\n      const res = await axios.post('http://127.0.0.1:8000/api/create/', formData);\n      setMessage(res.data.message);\n      // 2. NEW: Capture the Ticket Code from the backend response\n      setTicketCode(res.data.ticket_code); \n    } catch (error) {\n      console.error(error);\n      setMessage(\"Error submitting ticket. Please try again.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 flex items-center justify-center p-6\">\n      <div className=\"bg-white p-8 rounded-lg shadow-lg max-w-lg w-full\">\n        <h1 className=\"text-2xl font-bold mb-6 text-gray-800\">New Support Ticket</h1>\n        \n        {message ? (\n          <div className={`p-6 rounded-lg mb-4 text-center border ${message.includes('Error') ? 'bg-red-50 border-red-200 text-red-700' : 'bg-green-50 border-green-200 text-green-800'}`}>\n            \n            {/* 3. NEW: Display the Ticket Code Big and Bold */}\n            {ticketCode && (\n              <div className=\"mb-4\">\n                <span className=\"block text-sm text-gray-500 uppercase tracking-wide\">Ticket Generated Successfully</span>\n                <span className=\"block text-4xl font-extrabold text-blue-600 mt-1\">#{ticketCode}</span>\n              </div>\n            )}\n            \n            <p className=\"text-lg\">{message}</p>\n            \n            <button \n              onClick={() => window.location.reload()} \n              className=\"mt-6 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition\"\n            >\n              Submit Another Ticket\n            </button>\n          </div>\n        ) : (\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            \n            {/* Organization Name */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">Organization Name</label>\n              <select \n                name=\"org_name\" \n                value={formData.org_name} \n                onChange={handleChange}\n                className=\"mt-1 block w-full p-2 border border-gray-300 rounded-md\"\n              >\n                {companies.map(company => (\n                  <option key={company.id} value={company.id}>\n                    {company.company_name}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            {/* Submitter Name */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">Your Name</label>\n              <input \n                type=\"text\" \n                name=\"submitter_name\" \n                required\n                onChange={handleChange}\n                className=\"mt-1 block w-full p-2 border border-gray-300 rounded-md\"\n              />\n            </div>\n\n            {/* Issue Type */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">Issue Type</label>\n              <select \n                name=\"issue_type\" \n                onChange={handleChange}\n                className=\"mt-1 block w-full p-2 border border-gray-300 rounded-md\"\n              >\n                <option value=\"Hardware\">Hardware</option>\n                <option value=\"Software\">Software</option>\n                <option value=\"Network\">Network</option>\n              </select>\n            </div>\n\n            {/* Description */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">Description</label>\n              <textarea \n                name=\"description\" \n                required\n                rows=\"3\"\n                onChange={handleChange}\n                className=\"mt-1 block w-full p-2 border border-gray-300 rounded-md\"\n              ></textarea>\n            </div>\n\n            {/* Phone Number (Separate) */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">Phone Number</label>\n              <input \n                type=\"text\" \n                name=\"contact_number\" \n                required\n                onChange={handleChange}\n                className=\"mt-1 block w-full p-2 border border-gray-300 rounded-md\"\n              />\n            </div>\n\n            {/* Email Address (Separate) */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">Email Address</label>\n              <input \n                type=\"email\" \n                name=\"email\" \n                required\n                onChange={handleChange}\n                className=\"mt-1 block w-full p-2 border border-gray-300 rounded-md\"\n              />\n            </div>\n\n            <button \n              type=\"submit\" \n              disabled={loading}\n              className=\"w-full bg-blue-600 text-white p-2 rounded-md hover:bg-blue-700 disabled:bg-gray-400 font-semibold\"\n            >\n              {loading ? 'Processing...' : 'Submit Ticket'}\n            </button>\n          </form>\n        )}\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}}]
}